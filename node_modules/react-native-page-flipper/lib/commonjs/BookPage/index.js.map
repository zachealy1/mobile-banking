{"version":3,"names":["timingConfig","duration","easing","Easing","inOut","cubic","BookPage","React","forwardRef","ref","right","front","back","onPageFlip","containerSize","isAnimatingRef","setIsAnimating","isAnimating","enabled","isPressable","getPageStyle","single","onFlipStart","onPageDrag","onPageDragEnd","onPageDragStart","renderPage","x","useSharedValue","isMounted","useRef","rotateYAsDeg","useState","isDragging","setIsDragging","isDraggingRef","containerWidth","width","containerHeight","height","leftPSnapPoints","rightPSnapPoints","pSnapPoints","gesturesEnabled","showSpine","useEffect","current","turnPage","useCallback","id","value","withTiming","runOnJS","useImperativeHandle","onDrag","val","backStyle","useAnimatedStyle","degrees","interpolate","w","Math","ceil","zIndex","transform","translateX","frontStyle","Extrapolate","CLAMP","style","floor","containerStyle","flex","animatedBackPageStyle","l","left","onPanGestureHandler","useAnimatedGestureHandler","onStart","event","ctx","onActive","translationX","onEnd","snapTo","snapPoint","velocityX","progress","abs","clamp","frontPageStyle","backPageStyle","frontUrl","backUrl","position","styles","pageContainer","overflow","viewHeight","BlankPage","StyleSheet","absoluteFillObject","backgroundColor","create","container","backfaceVisibility"],"sources":["index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Pressable, StyleSheet, View, ViewStyle } from 'react-native';\nimport {\n    PanGestureHandler,\n    PanGestureHandlerGestureEvent,\n} from 'react-native-gesture-handler';\nimport Animated, {\n    Easing,\n    Extrapolate,\n    interpolate,\n    runOnJS,\n    useAnimatedGestureHandler,\n    useAnimatedStyle,\n    useSharedValue,\n    withTiming,\n    WithTimingConfig,\n} from 'react-native-reanimated';\nimport type { Page, Size } from '../types';\nimport BackShadow from './BackShadow';\nimport FrontShadow from './FrontShadow';\nimport PageShadow from './PageShadow';\nimport { BookSpine } from './BookSpine';\nimport { BookSpine2 } from './BookSpine2';\nimport { clamp, snapPoint } from '../utils/utils';\nexport type IBookPageProps = {\n    right: boolean;\n    front: Page;\n    back: Page;\n    onPageFlip: any;\n    containerSize: Size;\n    isAnimatingRef: React.MutableRefObject<boolean>;\n    setIsAnimating: (val: boolean) => void;\n    isAnimating: boolean;\n    enabled: boolean;\n    isPressable: boolean;\n    getPageStyle: (right: boolean, front: boolean) => any;\n    single: boolean;\n    onFlipStart?: (id: number) => void;\n    onPageDragStart?: () => void;\n    onPageDrag?: () => void;\n    onPageDragEnd?: () => void;\n    renderPage?: (data: any) => any;\n};\n\nexport type BookPageInstance = {\n    turnPage: () => void;\n};\n\nconst timingConfig: WithTimingConfig = {\n    duration: 800,\n    easing: Easing.inOut(Easing.cubic),\n};\n\nconst BookPage = React.forwardRef<BookPageInstance, IBookPageProps>(\n    (\n        {\n            right,\n            front,\n            back,\n            onPageFlip,\n            containerSize,\n            isAnimatingRef,\n            setIsAnimating,\n            isAnimating,\n            enabled,\n            isPressable,\n            getPageStyle,\n            single,\n            onFlipStart,\n            onPageDrag,\n            onPageDragEnd,\n            onPageDragStart,\n            renderPage,\n        },\n        ref\n    ) => {\n        const x = useSharedValue(0);\n        const isMounted = useRef(false);\n        const rotateYAsDeg = useSharedValue(0);\n        const [isDragging, setIsDragging] = useState(false);\n        const isDraggingRef = useRef(false);\n        const containerWidth = containerSize.width;\n        const containerHeight = containerSize.height;\n        const leftPSnapPoints = [0, containerWidth];\n        const rightPSnapPoints = [-containerWidth, 0];\n        const pSnapPoints = right ? rightPSnapPoints : leftPSnapPoints;\n        const gesturesEnabled = enabled && !isAnimating;\n        const showSpine = true;\n\n        // might not need this useEffect\n        // useEffect(() => {\n        //   if (!enabled) {\n        //     setIsDragging(false);\n        //   }\n        // }, [enabled]);\n\n        useEffect(() => {\n            isMounted.current = true;\n            return () => {\n                isMounted.current = false;\n            };\n        }, []);\n\n        const turnPage = useCallback(() => {\n            setIsDragging(true);\n            setIsAnimating(true);\n            const id = right ? 1 : -1;\n\n            if (onFlipStart && typeof onFlipStart === 'function') {\n                onFlipStart(id);\n            }\n            rotateYAsDeg.value = withTiming(\n                right ? 180 : -180,\n                timingConfig,\n                () => {\n                    runOnJS(onPageFlip)(id, false);\n                }\n            );\n        }, [\n            onFlipStart,\n            setIsDragging,\n            right,\n            onPageFlip,\n            rotateYAsDeg,\n            setIsAnimating,\n        ]);\n\n        React.useImperativeHandle(\n            ref,\n            () => ({\n                turnPage,\n            }),\n            [turnPage]\n        );\n\n        const onDrag = useCallback((val: boolean) => {\n            if (!isMounted.current) {\n                return;\n            }\n\n            if (isDraggingRef.current === val) {\n                // same value\n                return;\n            }\n\n            setIsDragging(val);\n            isDraggingRef.current = val;\n        }, []);\n\n        const backStyle = useAnimatedStyle(() => {\n            const degrees = rotateYAsDeg.value;\n            const x = right\n                ? interpolate(\n                      degrees,\n                      [0, 180],\n                      [containerWidth / 2, -containerWidth / 2]\n                  )\n                : interpolate(degrees, [-180, 0], [containerWidth / 2, 0]);\n\n            const w = right\n                ? interpolate(degrees, [0, 180], [0, containerWidth / 2])\n                : interpolate(degrees, [-180, 0], [containerWidth / 2, 0]);\n            return {\n                width: Math.ceil(w),\n                zIndex: 2,\n                transform: [{ translateX: x }],\n            };\n        });\n\n        const frontStyle = useAnimatedStyle(() => {\n            const degrees = rotateYAsDeg.value;\n\n            const w = right\n                ? interpolate(\n                      degrees,\n                      [0, 90],\n                      [containerWidth / 2, 0],\n                      Extrapolate.CLAMP\n                  )\n                : interpolate(\n                      degrees,\n                      [-90, 0],\n                      [0, containerWidth / 2],\n                      Extrapolate.CLAMP\n                  );\n\n            const style: ViewStyle = {\n                zIndex: 1,\n                width: Math.floor(w),\n            };\n\n            if (right) {\n                style['left'] = 0;\n            } else {\n                style['right'] = 0;\n            }\n\n            return style;\n        });\n\n        const containerStyle = useAnimatedStyle(() => {\n            return {\n                flex: 1,\n                // backgroundColor: 'white',\n                zIndex: isDragging ? 100 : 0,\n            };\n        });\n\n        const animatedBackPageStyle = useAnimatedStyle(() => {\n            const l = right\n                ? 0\n                : interpolate(\n                      rotateYAsDeg.value,\n                      [-180, 0],\n                      single\n                          ? [0, -containerWidth / 2]\n                          : [-containerWidth / 2, -containerWidth]\n                  );\n\n            return {\n                left: l,\n            };\n        });\n\n        const onPanGestureHandler = useAnimatedGestureHandler<\n            PanGestureHandlerGestureEvent,\n            { x: number }\n        >({\n            // @ts-ignore\n            onStart: (event, ctx) => {\n                if (onPageDragStart && typeof onPageDragStart === 'function') {\n                    runOnJS(onPageDragStart)();\n                }\n                ctx.x = x.value;\n            },\n            onActive: (event, ctx) => {\n                runOnJS(onDrag)(true);\n                x.value = ctx.x + event.translationX;\n                rotateYAsDeg.value = interpolate(\n                    x.value,\n                    [-containerWidth, 0, containerWidth],\n                    [180, 0, -180],\n                    Extrapolate.CLAMP\n                );\n\n                if (onPageDrag && typeof onPageDrag === 'function') {\n                    runOnJS(onPageDrag)();\n                }\n            },\n            onEnd: (event) => {\n                if (onPageDragEnd && typeof onPageDragEnd === 'function') {\n                    runOnJS(onPageDragEnd)();\n                }\n\n                const snapTo = snapPoint(x.value, event.velocityX, pSnapPoints);\n                const id = snapTo > 0 ? -1 : snapTo < 0 ? 1 : 0;\n                const degrees = snapTo > 0 ? -180 : snapTo < 0 ? 180 : 0;\n                x.value = snapTo;\n\n                if (rotateYAsDeg.value === degrees) {\n                    runOnJS(onPageFlip)(id, false);\n                } else {\n                    runOnJS(setIsAnimating)(true);\n\n                    const progress =\n                        Math.abs(rotateYAsDeg.value - degrees) / 100;\n                    const duration = clamp(\n                        800 * progress - Math.abs(0.1 * event.velocityX),\n                        350,\n                        1000\n                    );\n\n                    rotateYAsDeg.value = withTiming(\n                        degrees,\n                        {\n                            ...timingConfig,\n                            duration: duration,\n                        },\n                        () => {\n                            if (snapTo === 0) {\n                                runOnJS(onDrag)(false);\n                            }\n                            runOnJS(onPageFlip)(id, false);\n                        }\n                    );\n                }\n            },\n        });\n\n        if (!front || !back) {\n            return null;\n        }\n\n        const frontPageStyle = getPageStyle(right, true);\n        const backPageStyle = getPageStyle(right, false);\n\n        const frontUrl = right ? front.right : front.left;\n        const backUrl = right ? back.left : back.right;\n        return (\n            <PanGestureHandler\n                onGestureEvent={onPanGestureHandler}\n                enabled={gesturesEnabled}\n            >\n                <Animated.View style={containerStyle}>\n                    {isPressable && (\n                        <Pressable\n                            disabled={isAnimating}\n                            onPress={() => {\n                                if (!isAnimatingRef.current) turnPage();\n                            }}\n                            style={[\n                                {\n                                    position: 'absolute',\n                                    height: '100%',\n                                    width: '25%',\n                                    zIndex: 10000,\n                                },\n                                right ? { right: 0 } : { left: 0 },\n                            ]}\n                        />\n                    )}\n\n                    {/* BACK */}\n                    <Animated.View\n                        style={[\n                            styles.pageContainer,\n                            backStyle,\n                            { overflow: 'visible' },\n                        ]}\n                    >\n                        <View style={styles.pageContainer}>\n                            {backUrl ? (\n                                renderPage && (\n                                    <Animated.View\n                                        style={[\n                                            backPageStyle,\n                                            animatedBackPageStyle,\n                                        ]}\n                                    >\n                                        {renderPage(backUrl)}\n                                    </Animated.View>\n                                )\n                            ) : (\n                                <BlankPage />\n                            )}\n                        </View>\n\n                        <BackShadow {...{ degrees: rotateYAsDeg, right }} />\n                        <FrontShadow\n                            {...{\n                                right,\n                                degrees: rotateYAsDeg,\n                                width: containerWidth,\n                                viewHeight: containerHeight,\n                            }}\n                        />\n\n                        <PageShadow\n                            {...{\n                                right,\n                                degrees: rotateYAsDeg,\n                                width: containerWidth,\n                                viewHeight: containerHeight,\n                                containerSize,\n                            }}\n                        />\n\n                        {showSpine && (\n                            <BookSpine2\n                                right={right}\n                                degrees={rotateYAsDeg}\n                                containerSize={containerSize}\n                            />\n                        )}\n                    </Animated.View>\n                    {/* FRONT */}\n                    <Animated.View style={[styles.pageContainer, frontStyle]}>\n                        {frontUrl ? (\n                            renderPage && (\n                                <Animated.View style={[frontPageStyle]}>\n                                    {renderPage(frontUrl)}\n                                </Animated.View>\n                            )\n                        ) : (\n                            <BlankPage />\n                        )}\n                        {showSpine && (\n                            <BookSpine\n                                right={right}\n                                containerSize={containerSize}\n                            />\n                        )}\n                    </Animated.View>\n                </Animated.View>\n            </PanGestureHandler>\n        );\n    }\n);\n\nexport { BookPage };\n\nconst BlankPage = () => (\n    <View\n        style={{ ...StyleSheet.absoluteFillObject, backgroundColor: '#fff' }}\n    />\n);\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n    },\n    pageContainer: {\n        height: '100%',\n        width: '100%',\n        position: 'absolute',\n        backfaceVisibility: 'hidden',\n        overflow: 'hidden',\n        // justifyContent: 'center',\n        // alignItems: 'flex-end',\n        // backgroundColor: 'rgba(0,0,0,0)',\n        // backgroundColor: 'white',\n    },\n});\n"],"mappings":"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"}