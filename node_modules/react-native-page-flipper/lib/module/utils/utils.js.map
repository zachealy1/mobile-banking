{"version":3,"names":["runOnJS","createPages","portrait","singleImageMode","data","allPages","forEach","page","push","left","right","i","length","transformOrigin","transformations","x","y","translateX","translateY","debug","msg","val","console","log","debugValue","snapPoint","value","velocity","points","point","deltas","map","p","Math","abs","minDelta","min","apply","filter","clamp","number","max"],"sources":["utils.ts"],"sourcesContent":["import { runOnJS } from 'react-native-reanimated';\nimport type { Page } from '../types';\nimport type { TransformsStyle } from 'react-native';\n\nexport const createPages = ({\n    portrait,\n    singleImageMode,\n    data,\n}: {\n    portrait: boolean;\n    singleImageMode: boolean;\n    data: string[];\n}) => {\n    const allPages: Page[] = [];\n\n    if (portrait) {\n        if (!singleImageMode) {\n            data.forEach((page) => {\n                allPages.push({\n                    left: page,\n                    right: page,\n                });\n                allPages.push({\n                    left: page,\n                    right: page,\n                });\n            });\n        } else {\n            for (let i = 0; i < data.length; i++) {\n                allPages[i] = {\n                    left: data[i],\n                    right: data[i],\n                };\n            }\n        }\n    } else {\n        for (let i = 0; i < data.length; i++) {\n            if (singleImageMode) {\n                allPages.push({\n                    left: data[i],\n                    right: data[i + 1],\n                });\n                i++;\n            } else {\n                allPages.push({\n                    left: data[i],\n                    right: data[i],\n                });\n            }\n        }\n    }\n    return allPages;\n};\n\ntype RNTransform = Exclude<TransformsStyle['transform'], undefined>;\n\nexport const transformOrigin = (\n    { x, y }: { x: number; y: number },\n    transformations: RNTransform\n): RNTransform => {\n    'worklet';\n    return [\n        { translateX: x },\n        { translateY: y },\n        ...transformations,\n        { translateX: -x },\n        { translateY: -y },\n    ];\n};\n\nconst debug = (msg: string, val: any) => {\n    console.log(msg, val);\n};\n\nexport const debugValue = (msg: string, val: any) => {\n    'worklet';\n    runOnJS(debug)(msg, val);\n};\n\nexport const snapPoint = (\n    value: number,\n    velocity: number,\n    points: ReadonlyArray<number>\n): number => {\n    'worklet';\n\n    const point = value + 0.25 * velocity;\n    const deltas = points.map((p) => Math.abs(point - p));\n    const minDelta = Math.min.apply(null, deltas);\n    return points.filter((p) => Math.abs(point - p) === minDelta)[0];\n};\n\nexport function clamp(number: number, min: number, max: number) {\n    'worklet';\n    return Math.max(min, Math.min(number, max));\n}\n"],"mappings":"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"}