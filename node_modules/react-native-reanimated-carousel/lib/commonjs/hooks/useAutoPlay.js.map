{"version":3,"sources":["useAutoPlay.ts"],"names":["useAutoPlay","opts","autoPlay","autoPlayReverse","autoPlayInterval","carouselController","prev","next","timer","React","useRef","stopped","play","useCallback","current","clearTimeout","setTimeout","onFinished","pause","start","useEffect"],"mappings":";;;;;;;AAAA;;;;;;AAIO,SAASA,WAAT,CAAqBC,IAArB,EAKJ;AACD,QAAM;AAAEC,IAAAA,QAAQ,GAAG,KAAb;AAAoBC,IAAAA,eAAe,GAAG,KAAtC;AAA6CC,IAAAA,gBAA7C;AAA+DC,IAAAA;AAA/D,MAAsFJ,IAA5F;AAEA,QAAM;AAAEK,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAiBF,kBAAvB;AACA,QAAMG,KAAK,GAAGC,KAAK,CAACC,MAAN,EAAd;AACA,QAAMC,OAAO,GAAGF,KAAK,CAACC,MAAN,CAAsB,CAACR,QAAvB,CAAhB;AAEA,QAAMU,IAAI,GAAGH,KAAK,CAACI,WAAN,CAAkB,MAAM;AACnC,QAAIF,OAAO,CAACG,OAAZ,EAAqB;AAErBN,IAAAA,KAAK,CAACM,OAAN,IAAiBC,YAAY,CAACP,KAAK,CAACM,OAAP,CAA7B;AACAN,IAAAA,KAAK,CAACM,OAAN,GAAgBE,UAAU,CAAC,MAAM;AAC/Bb,MAAAA,eAAe,GAAGG,IAAI,CAAC;AAAEW,QAAAA,UAAU,EAAEL;AAAd,OAAD,CAAP,GAAgCL,IAAI,CAAC;AAAEU,QAAAA,UAAU,EAAEL;AAAd,OAAD,CAAnD;AACD,KAFyB,EAEvBR,gBAFuB,CAA1B;AAGD,GAPY,EAOV,CAACD,eAAD,EAAkBC,gBAAlB,EAAoCE,IAApC,EAA0CC,IAA1C,CAPU,CAAb;AASA,QAAMW,KAAK,GAAGT,KAAK,CAACI,WAAN,CAAkB,MAAM;AACpC,QAAI,CAACX,QAAL,EAAe;AAEfM,IAAAA,KAAK,CAACM,OAAN,IAAiBC,YAAY,CAACP,KAAK,CAACM,OAAP,CAA7B;AACAH,IAAAA,OAAO,CAACG,OAAR,GAAkB,IAAlB;AACD,GALa,EAKX,CAACZ,QAAD,CALW,CAAd;AAOA,QAAMiB,KAAK,GAAGV,KAAK,CAACI,WAAN,CAAkB,MAAM;AACpC,QAAI,CAACX,QAAL,EAAe;AAEfS,IAAAA,OAAO,CAACG,OAAR,GAAkB,KAAlB;AACAF,IAAAA,IAAI;AACL,GALa,EAKX,CAACA,IAAD,EAAOV,QAAP,CALW,CAAd;AAOAO,EAAAA,KAAK,CAACW,SAAN,CAAgB,MAAM;AACpB,QAAIlB,QAAJ,EAAciB,KAAK,GAAnB,KACKD,KAAK;AAEV,WAAOA,KAAP;AACD,GALD,EAKG,CAACA,KAAD,EAAQC,KAAR,EAAejB,QAAf,CALH;AAOA,SAAO;AACLgB,IAAAA,KADK;AAELC,IAAAA;AAFK,GAAP;AAID","sourcesContent":["import * as React from \"react\";\n\nimport type { ICarouselController } from \"./useCarouselController\";\n\nexport function useAutoPlay(opts: {\n  autoPlay?: boolean;\n  autoPlayInterval?: number;\n  autoPlayReverse?: boolean;\n  carouselController: ICarouselController;\n}) {\n  const { autoPlay = false, autoPlayReverse = false, autoPlayInterval, carouselController } = opts;\n\n  const { prev, next } = carouselController;\n  const timer = React.useRef<ReturnType<typeof setTimeout>>();\n  const stopped = React.useRef<boolean>(!autoPlay);\n\n  const play = React.useCallback(() => {\n    if (stopped.current) return;\n\n    timer.current && clearTimeout(timer.current);\n    timer.current = setTimeout(() => {\n      autoPlayReverse ? prev({ onFinished: play }) : next({ onFinished: play });\n    }, autoPlayInterval);\n  }, [autoPlayReverse, autoPlayInterval, prev, next]);\n\n  const pause = React.useCallback(() => {\n    if (!autoPlay) return;\n\n    timer.current && clearTimeout(timer.current);\n    stopped.current = true;\n  }, [autoPlay]);\n\n  const start = React.useCallback(() => {\n    if (!autoPlay) return;\n\n    stopped.current = false;\n    play();\n  }, [play, autoPlay]);\n\n  React.useEffect(() => {\n    if (autoPlay) start();\n    else pause();\n\n    return pause;\n  }, [pause, start, autoPlay]);\n\n  return {\n    pause,\n    start,\n  };\n}\n"]}