{"version":3,"sources":["useCarouselController.test.tsx"],"names":["React","useSharedValue","act","renderHook","useImperativeHandle","useRef","View","GlobalStateContext","useCarouselController","jest","mock","mockRunOnJS","fn","mockAnimatedReaction","deps","cb","depsResult","initialValue","value","useDerivedValue","callback","useAnimatedReaction","withTiming","toValue","config","runOnJS","Easing","bezier","factory","requireMock","originalModule","requireActual","current","ref","createHandle","mockGlobalState","props","overscrollEnabled","loop","pagingEnabled","snapEnabled","enabled","scrollAnimationDuration","withAnimation","undefined","dataLength","data","Array","from","length","_","i","width","height","renderItem","flex","autoFillData","defaultIndex","autoPlayInterval","rawData","rawDataLength","common","size","validLength","layout","containerSize","itemDimensions","updateItemDimensions","updateContainerSize","wrapper","children","describe","mockHandlerOffset","defaultProps","beforeEach","clearAllMocks","handlerOffset","duration","mockImplementation","it","result","expect","getCurrentIndex","toBe","next","prev","scrollTo","index","onFinished","animated","toHaveBeenCalled","count","calls","handle"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useSharedValue } from \"react-native-reanimated\";\n\nimport { act, renderHook } from \"@testing-library/react-hooks\";\n\nimport { useImperativeHandle, useRef } from \"react\";\nimport { View } from \"react-native\";\nimport { GlobalStateContext, IContext } from \"../store\";\nimport { ICarouselInstance } from \"../types\";\nimport { useCarouselController } from \"./useCarouselController\";\n\n// Mock Reanimated\njest.mock(\"react-native-reanimated\", () => {\n  const mockRunOnJS = jest.fn((fn) => {\n    return (...args: any[]) => {\n      return fn(...args);\n    };\n  });\n\n  const mockAnimatedReaction = jest.fn((deps, cb) => {\n    const depsResult = deps();\n    cb(depsResult);\n    return () => {};\n  });\n\n  return {\n    useSharedValue: jest.fn((initialValue) => ({\n      value: initialValue,\n    })),\n    useDerivedValue: jest.fn((callback) => ({\n      value: callback(),\n    })),\n    useAnimatedReaction: mockAnimatedReaction,\n    withTiming: jest.fn((toValue, config, callback) => {\n      if (callback) callback(true);\n\n      return toValue;\n    }),\n    runOnJS: mockRunOnJS,\n    mockAnimatedReaction,\n    mockRunOnJS,\n    Easing: {\n      bezier: () => ({\n        factory: () => 0,\n      }),\n    },\n  };\n});\n\n// Get mock functions for testing\nconst { mockAnimatedReaction, mockRunOnJS } = jest.requireMock(\"react-native-reanimated\");\n\n// Update the React mock to include useRef\njest.mock(\"react\", () => {\n  const originalModule = jest.requireActual(\"react\");\n  return {\n    ...originalModule,\n    useRef: jest.fn((initialValue) => ({ current: initialValue })),\n    useImperativeHandle: jest.fn((ref, createHandle) => createHandle()),\n  };\n});\n\n// Add mock for GlobalStateContext\nconst mockGlobalState: IContext = {\n  props: {\n    overscrollEnabled: true,\n    loop: true,\n    pagingEnabled: true,\n    snapEnabled: true,\n    enabled: true,\n    scrollAnimationDuration: 500,\n    withAnimation: undefined,\n    dataLength: 5,\n    data: Array.from({ length: 5 }, (_, i) => i),\n    width: 300,\n    height: 300,\n    renderItem: () => <View style={{ flex: 1 }} />,\n    autoFillData: false,\n    defaultIndex: 0,\n    autoPlayInterval: 0,\n    rawData: [],\n    rawDataLength: 0,\n  },\n  common: {\n    size: 300,\n    validLength: 5,\n  },\n  layout: {\n    // @ts-ignore\n    containerSize: { value: { width: 300, height: 300 } },\n    // @ts-ignore\n    itemDimensions: { value: {} },\n    updateItemDimensions: jest.fn(),\n    updateContainerSize: jest.fn(),\n  },\n};\n\n// Add wrapper for renderHook\nconst wrapper: React.FC<{ children: React.ReactNode }> = ({ children }) => (\n  <GlobalStateContext.Provider value={mockGlobalState}>{children}</GlobalStateContext.Provider>\n);\n\ndescribe(\"useCarouselController\", () => {\n  let mockHandlerOffset: ReturnType<typeof useSharedValue>;\n  let ref: ReturnType<typeof useRef>;\n  let defaultProps: any;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockHandlerOffset = useSharedValue(0);\n    ref = useRef<ICarouselInstance>(null!);\n    defaultProps = {\n      ref,\n      size: 300,\n      loop: true,\n      dataLength: 5,\n      handlerOffset: mockHandlerOffset,\n      autoFillData: false,\n      duration: 300,\n    };\n\n    mockHandlerOffset.value = 0;\n    mockAnimatedReaction.mockImplementation((deps: () => any, cb: (depsResult: any) => void) => {\n      const depsResult = deps();\n      cb(depsResult);\n      return () => {};\n    });\n  });\n\n  it(\"should initialize with default index\", () => {\n    mockHandlerOffset.value = -600; // size * 2\n    const { result } = renderHook(\n      () =>\n        useCarouselController({\n          ...defaultProps,\n          defaultIndex: 2,\n        }),\n      { wrapper }\n    );\n\n    expect(result.current.getCurrentIndex()).toBe(2);\n  });\n\n  it(\"should move to next slide\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    act(() => {\n      result.current.next();\n    });\n\n    expect(mockHandlerOffset.value).toBe(-300); // size * 1\n  });\n\n  it(\"should move to previous slide\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    act(() => {\n      result.current.prev();\n    });\n\n    expect(mockHandlerOffset.value).toBe(300); // size * -1\n  });\n\n  it(\"should handle loop behavior correctly\", () => {\n    const { result } = renderHook(\n      () =>\n        useCarouselController({\n          ...defaultProps,\n          loop: true,\n        }),\n      { wrapper }\n    );\n\n    // Move to last slide\n    act(() => {\n      result.current.scrollTo({ index: 4 });\n    });\n\n    // Try to go next (should loop to first)\n    act(() => {\n      result.current.next();\n    });\n\n    expect(mockHandlerOffset.value).toBe(-1500); // size * 5\n  });\n\n  it(\"should prevent movement when loop is disabled and at bounds\", () => {\n    const { result } = renderHook(\n      () =>\n        useCarouselController({\n          ...defaultProps,\n          loop: false,\n        }),\n      { wrapper }\n    );\n\n    // Try to go previous at start\n    act(() => {\n      result.current.prev();\n    });\n    expect(mockHandlerOffset.value).toBe(0);\n\n    // Go to end\n    act(() => {\n      result.current.scrollTo({ index: 4 });\n    });\n\n    // Try to go next at end\n    act(() => {\n      result.current.next();\n    });\n    expect(mockHandlerOffset.value).toBe(-1200); // size * 4\n  });\n\n  it(\"should scroll to specific index\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    act(() => {\n      result.current.scrollTo({ index: 3 });\n    });\n\n    expect(mockHandlerOffset.value).toBe(-900); // size * 3\n  });\n\n  it(\"should handle animation callbacks\", () => {\n    const onFinished = jest.fn();\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    act(() => {\n      result.current.next({\n        animated: true,\n        onFinished,\n      });\n    });\n\n    expect(onFinished).toHaveBeenCalled();\n  });\n\n  it(\"should respect animation duration\", () => {\n    const { result } = renderHook(\n      () =>\n        useCarouselController({\n          ...defaultProps,\n          duration: 500,\n        }),\n      { wrapper }\n    );\n\n    const onFinished = jest.fn();\n    act(() => {\n      result.current.next({\n        animated: true,\n        onFinished,\n      });\n    });\n\n    expect(onFinished).toHaveBeenCalled();\n  });\n\n  it(\"should handle non-animated transitions\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    act(() => {\n      result.current.scrollTo({ index: 2, animated: false });\n    });\n\n    expect(mockHandlerOffset.value).toBe(-600); // size * 2\n  });\n\n  it(\"should handle multiple slide movements\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    act(() => {\n      result.current.next({ count: 2 });\n    });\n\n    expect(mockHandlerOffset.value).toBe(-600); // size * 2\n  });\n\n  // it(\"should maintain correct index with autoFillData\", () => {\n  //   const { result } = renderHook(\n  //     () =>\n  //       useCarouselController({\n  //         ...defaultProps,\n  //         autoFillData: true,\n  //         dataLength: 3,\n  //       }),\n  //     { wrapper }\n  //   );\n\n  //   act(() => {\n  //     result.current.next();\n  //     result.current.next();\n  //   });\n\n  //   expect(result.current.getCurrentIndex()).toBe(2);\n  // });\n\n  it(\"should handle animated reactions correctly\", () => {\n    renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    expect(mockAnimatedReaction).toHaveBeenCalled();\n    expect(mockRunOnJS).toHaveBeenCalled();\n  });\n\n  it(\"should handle runOnJS correctly\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    act(() => {\n      result.current.next();\n    });\n\n    expect(mockRunOnJS).toHaveBeenCalled();\n  });\n});\n\ndescribe(\"useCarouselController imperative handle\", () => {\n  let mockHandlerOffset: ReturnType<typeof useSharedValue>;\n  let ref: ReturnType<typeof useRef>;\n  let defaultProps: any;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockHandlerOffset = useSharedValue(0);\n    ref = useRef<ICarouselInstance>(null!);\n    defaultProps = {\n      ref,\n      size: 300,\n      loop: true,\n      dataLength: 5,\n      handlerOffset: mockHandlerOffset,\n      autoFillData: false,\n      duration: 300,\n    };\n    mockHandlerOffset.value = 0;\n  });\n\n  // it(\"should expose imperative methods through ref\", () => {\n  //   renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n  //   // Verify useImperativeHandle was called\n  //   expect(useImperativeHandle).toHaveBeenCalledWith(ref, expect.any(Function));\n\n  //   // Get the handle creator function\n  //   const createHandle = (useImperativeHandle as jest.Mock).mock.calls[0][1];\n  //   const handle = createHandle();\n\n  //   // Verify exposed methods\n  //   expect(handle).toHaveProperty(\"getCurrentIndex\");\n  //   expect(handle).toHaveProperty(\"next\");\n  //   expect(handle).toHaveProperty(\"prev\");\n  //   expect(handle).toHaveProperty(\"scrollTo\");\n  // });\n\n  it(\"should maintain correct index through imperative calls\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    // Get handle methods\n    const createHandle = (useImperativeHandle as jest.Mock).mock.calls[0][1];\n    const handle = createHandle();\n\n    // Test sequence of imperative calls\n    act(() => {\n      handle.next();\n      handle.next();\n    });\n    expect(handle.getCurrentIndex()).toBe(2);\n\n    act(() => {\n      handle.prev();\n    });\n    expect(handle.getCurrentIndex()).toBe(1);\n\n    act(() => {\n      handle.scrollTo({ index: 3 });\n    });\n    expect(handle.getCurrentIndex()).toBe(3);\n  });\n\n  it(\"should handle animation callbacks through imperative calls\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n    const onFinished = jest.fn();\n\n    // Get handle methods\n    const createHandle = (useImperativeHandle as jest.Mock).mock.calls[0][1];\n    const handle = createHandle();\n\n    act(() => {\n      handle.next({ animated: true, onFinished });\n    });\n\n    expect(onFinished).toHaveBeenCalled();\n  });\n\n  it(\"should respect loop settings through imperative calls\", () => {\n    const { result } = renderHook(\n      () =>\n        useCarouselController({\n          ...defaultProps,\n          loop: false,\n        }),\n      { wrapper }\n    );\n\n    // Get handle methods\n    const createHandle = (useImperativeHandle as jest.Mock).mock.calls[0][1];\n    const handle = createHandle();\n\n    // Try to go past the end\n    act(() => {\n      handle.scrollTo({ index: 4 });\n      handle.next();\n    });\n    expect(handle.getCurrentIndex()).toBe(4);\n\n    // Try to go before the start\n    act(() => {\n      handle.scrollTo({ index: 0 });\n      handle.prev();\n    });\n    expect(handle.getCurrentIndex()).toBe(0);\n  });\n\n  it(\"should handle multiple slide movements through imperative calls\", () => {\n    const { result } = renderHook(() => useCarouselController(defaultProps), { wrapper });\n\n    // Get handle methods\n    const createHandle = (useImperativeHandle as jest.Mock).mock.calls[0][1];\n    const handle = createHandle();\n\n    act(() => {\n      handle.next({ count: 2 });\n    });\n\n    expect(handle.getCurrentIndex()).toBe(2);\n    expect(mockHandlerOffset.value).toBe(-600); // size * 2\n  });\n});\n"]}